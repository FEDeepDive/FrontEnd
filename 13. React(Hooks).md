## 1. hookì´ ë­”ê°€ìš”? ì¼ë°˜ í•¨ìˆ˜ë‘ ì–´ë–¤ ì°¨ì´ê°€ ìˆë‚˜ìš”?

- **ë“±ì¥ ë°°ê²½**
  - í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ë˜ ì‹œì ˆì„ (ë‹¹ì‹œ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” statefulí•  ìˆ˜ ì—†ì—ˆê¸° ë•Œë¬¸)
  - ì»´í¬ë„ŒíŠ¸ ê°„ stateful ë¡œì§ ì¬ì‚¬ìš©ì´ ì–´ë ¤ì›Œ HOC, render propsë¥¼ ì´ìš©í•  ê²½ìš°
    - 1ï¸âƒ£ì½”ë“œ ì¶”ì ì´ ì–´ë ¤ì›€ 2ï¸âƒ£ì»´í¬ë„ŒíŠ¸ì˜ ì¬êµ¬ì„±ì„ ê°•ìš”í•¨ 3ï¸âƒ£wrapper ì§€ì˜¥
  - í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ ë³µì¡ì„±
    - 1ï¸âƒ£ìƒëª…ì£¼ê¸° ë©”ì„œë“œì˜ ë³µì¡ì„± 2ï¸âƒ£í…ŒìŠ¤íŠ¸ì˜ ì–´ë ¤ì›€
  - í´ë˜ìŠ¤ ìì²´ì˜ ë¬¸ì œ
    - 1ï¸âƒ£`this` ëŸ¬ë‹ì»¤ë¸Œ(ì˜ ì•Œì•„ë„ ì–´ë µê³  ë³µì¡í•¨) 2ï¸âƒ£ì½”ë“œê°€ ê¸º 3ï¸âƒ£í•« ë¦¬ë¡œë”©ì„ ê¹¨ì§€ê¸° ì‰½ê²Œ í•¨
- **ê°œë…**
  - í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœì™€ ìƒëª…ì£¼ê¸° ê¸°ëŠ¥ì„ ì—°ë™(hook)í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜
  - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¡œì§ì„ ë‹´ì€ í•¨ìˆ˜
  - ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•¨
  - í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•´ë„, [ê° í˜¸ì¶œì€ ë…ë¦½ì ì„](https://ko.legacy.reactjs.org/docs/hooks-faq.html#how-does-react-associate-hook-calls-with-components)
- **ì‘ì„± ê·œì¹™ (ì¼ë°˜ í•¨ìˆ˜ì™€ ì°¨ì´)**
  - í•¨ìˆ˜ ì´ë¦„ì´ `use`ë¡œ ì‹œì‘í•¨
  - **í•¨ìˆ˜ ë‚´ ìµœìƒë‹¨**ì—ì„œë§Œ í˜¸ì¶œ ê°€ëŠ¥
    - ë°˜ë³µë¬¸, ì¡°ê±´ë¬¸, ì¤‘ì²© í•¨ìˆ˜, `try`/`catch`/`finally` ë“±ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ì—†ìŒ
  - **ë¦¬ì•¡íŠ¸ í•¨ìˆ˜(í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸, ì»¤ìŠ¤í…€ í›…) ì•ˆì—ì„œë§Œ** í˜¸ì¶œ ê°€ëŠ¥ (í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš© âŒ)
  - ë¦¬ì•¡íŠ¸ê°€ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ê³  ìˆì„ ë•Œë§Œ í˜¸ì¶œ ê°€ëŠ¥
- **ì£¼ì˜ì‚¬í•­**
  - ìˆœìˆ˜ í•¨ìˆ˜ì—¬ì•¼ í•¨ (ë©±ë“±ì„±ì´ ë³´ì¥ë˜ì–´ì•¼ í•¨)
  - ë™ì ìœ¼ë¡œ ì‚¬ìš© ë¶ˆê°€
  - ë™ì ìœ¼ë¡œ ë³€ê²½ ë¶ˆê°€

## 2. useState

### useState í›… ì‚¬ìš©ë²•

```jsx
const [state, setState] = useState(initialState);
```

- **ê°œë…**
  - ìƒíƒœë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” hook
  - ìƒíƒœë€ ì»´í¬ë„ŒíŠ¸ì˜ ë°ì´í„°ë¥¼ ê¸°ì–µí•˜ëŠ” íŠ¹ë³„í•œ ë³€ìˆ˜
- **íŒŒë¼ë¯¸í„°**
  - `initialState`: `state` ì´ˆê¹ƒê°’
- **ë°˜í™˜ê°’**
  - `[state, setState]`
    - `state`: í˜„ì¬ ìƒíƒœ ê°’
    - `setState`: ìƒíƒœ ê°’ì„ ì—…ë°ì´íŠ¸í•˜ê³ , **ë¦¬ë Œë”ë§ì„ íŠ¸ë¦¬ê±°**í•˜ëŠ” í•¨ìˆ˜
      - ì—…ë°ì´íŠ¸í•  ê°’ ë˜ëŠ” ì—…ë°ì´í„° í•¨ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ
- **ì‚¬ìš© ì˜ˆì‹œ**

  ```jsx
  // âœ…ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜ˆì‹œ
  const [name, setName] = useState('Kim');
  const handleNameChange = (newName) => {
    setName(newName);
  }

  // âœ…ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ ì˜ˆì‹œ
  const [todos, setTodos] = useState(['some task']);
  const appendName = (newTodo) => {
    setNames((prevTodos) => [...prevTodos, newTodo]);
  }

  // âœ…ìƒíƒœ ì´ˆê¸°í™” í•¨ìˆ˜ ì˜ˆì‹œ
  const getData = () => ({ ... });
  const [data, setData] = useState(getData);   // âœ…good
  const [data, setData] = useState(getData()); // âŒbad (ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ë¨)
  ```

### ì§ˆë¬¸

1ï¸âƒ£ ì™œ `state`ë¥¼ ì§ì ‘ ë°”ê¾¸ì§€ ì•Šê³ , `useState`ë¥¼ ì‚¬ìš©í•˜ë‚˜ìš”?

âœ… `useState`ë¥¼ ì‚¬ìš©í•´ì•¼ ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. `state` ëŒ€ì‹  ì§€ì—­ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ê°’ì€ ë°”ë€Œì§€ë§Œ ë¦¬ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ê²ƒì²˜ëŸ¼, `state`ë¥¼ ì§ì ‘ ë°”ê¾¸ì–´ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤.

2ï¸âƒ£ `setState`ëŠ” ë¹„ë™ê¸° ë™ì‘ì¸ê°€ìš”? ë™ê¸° ë™ì‘ì¸ê°€ìš”?

âœ… `setState`ëŠ” ë¹„ë™ê¸° ë™ì‘ì…ë‹ˆë‹¤.

```jsx
const [count, setCount] = useState(0);
const increment = () => {
  setCount(count + 1);
  console.log(count);
};

return <button onClick={increment}>plus</button>;
```

ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ count ìƒíƒœë¥¼ ì¦ê°€ì‹œí‚¤ê³  ë™ì‹œì— ìƒíƒœë¥¼ ë¡œê¹…í•˜ëŠ”ì˜ˆì œì…ë‹ˆë‹¤. ìœ„ ì˜ˆì œì—ì„œ ë²„íŠ¼ì„ 3ë²ˆ í´ë¦­í•˜ë©´ ì½˜ì†”ì—ëŠ” 1, 2, 3ì´ ì•„ë‹Œ 0, 1, 2ê°€ ì°í™ë‹ˆë‹¤. ë¹„ë™ê¸° í•¨ìˆ˜ì¸ `setState`ê°€ ë™ê¸° í•¨ìˆ˜ì¸ `console.log`ë³´ë‹¤ ë‚˜ì¤‘ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

3ï¸âƒ£ `setState`ê°€ ë¹„ë™ê¸° ë™ì‘ì„ ì·¨í–ˆì„ ë•Œ ì–»ì„ ìˆ˜ ìˆëŠ” ì´ì ì€ ë¬´ì—‡ì¸ê°€ìš”?

âœ… ë¦¬ì•¡íŠ¸ëŠ” ì—¬ëŸ¬ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ëª¨ì•„ í•œ ë²ˆì— ì²˜ë¦¬í•˜ì—¬, ë Œë”ë§ íšŸìˆ˜ë¥¼ ì¤„ì´ê³  ì„±ëŠ¥ì„ ë†’ì…ë‹ˆë‹¤. ì´ë¥¼ **ë°°ì¹˜(Batch) ì²˜ë¦¬**ë¼ê³  í•©ë‹ˆë‹¤. `setState`ê°€ ë™ê¸° ë™ì‘ì´ë¼ë©´ ì´ëŸ¬í•œ ë°°ì¹˜ ì²˜ë¦¬ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.

4ï¸âƒ£ `setState`ë¥¼ ë™ê¸° ë™ì‘ì²˜ëŸ¼ ë§Œë“œëŠ” ë°©ë²•ì´ ìˆë‚˜ìš”?

âœ… `useEffect`ê°€ ë§ˆìš´íŠ¸ ì´í›„ì— ì‹¤í–‰ë˜ëŠ” ì ì„ ì´ìš©í•´, `setState` ì§í›„ ìƒíƒœ ê°’ì„ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
const increment = () => {
  setCount(count + 1);
};

useEffect(() => {
  console.log(count);
}, [count]);
```

## 3. useEffect/useLayoutEffect

### useEffect í›… ì‚¬ìš©ë²•

```jsx
useEffect(setup, dependencies?)
```

- **ê°œë…**
  - ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ê¸°í™”í•˜ëŠ” í›…
  - ë Œë”ë§ í›„ ì‹¤í–‰ë¨
- **íŒŒë¼ë¯¸í„°**
  - `setup`: ì´í™íŠ¸ ë¡œì§ì„ í¬í•¨í•˜ê³  í´ë¦°ì—… í•¨ìˆ˜(optional)ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
    - í´ë¦°ì—… í•¨ìˆ˜ëŠ” ë§ˆìš´íŠ¸ í•´ì œ ì‹œ ì‹¤í–‰ë¨
    - í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì§€ì •í•˜ì§€ ì•Šì•„ë„ ì„ì˜ì ìœ¼ë¡œ ì§€ì •ë˜ì–´ ìˆìŒ
  - `dependencies`?: `setup` í•¨ìˆ˜ì—ì„œ ì°¸ì¡°ë˜ëŠ” ë°˜ì‘í˜• ê°’ë“¤ì„ í¬í•¨í•˜ëŠ” ë°°ì—´
    - ì˜ì¡´ì„± ë°°ì—´ì´ ì „ë‹¬ë˜ì§€ ì•Šì€ ê²½ìš°: ëª¨ë“  ë Œë”ë§ë§ˆë‹¤ ì´í™íŠ¸ê°€ ë™ì‘
    - ë¹ˆ ì˜ì¡´ì„± ë°°ì—´ì´ ì „ë‹¬ë˜ëŠ” ê²½ìš°: ì²« ë Œë”ë§ ì‹œ ì´í™íŠ¸ê°€ ë™ì‘
    - ì˜ì¡´ì„± ë°°ì—´ì´ ì „ë‹¬ë˜ëŠ” ê²½ìš°: ì²« ë Œë”ë§ + ì˜ì¡´ì„± ê°’ ë³€ê²½ ì‹œ ì´í™íŠ¸ê°€ ë™ì‘
- **ì‚¬ìš© ì˜ˆì‹œ**

  ```jsx
  // âœ…ë¹ˆ ì˜ì¡´ì„± ë°°ì—´ ì‚¬ìš© ì˜ˆì‹œ
  const [todos, setTodos] = useState([]);
  useEffect(() => {
    const data = getTodos();
    setTodos(data);
  }, []);

  // âœ…í´ë¦°ì—… í•¨ìˆ˜ ì‚¬ìš© ì˜ˆì‹œ
  const [serverUrl, setServerUrl] = useState('https://localhost:1234');
  useEffect(() => {
    const connection = createConnection(serverUrl);
    connection.connect();

    return () => {
      connection.disconnect();
    };
  }, [serverUrl]);
  ```

### useLayoutEffect í›… ì‚¬ìš©ë²•

```jsx
useLayoutEffect(setup, dependencies?)
```

- **ê°œë…**
  - ë Œë”ë§ ì „ì— ì‹¤í–‰ë˜ëŠ” `useEffect`
  - í™”ë©´ì„ ë Œë”ë§í•˜ê¸° ì „ì— ë ˆì´ì•„ì›ƒ(ì»´í¬ë„ŒíŠ¸ ìœ„ì¹˜ ë“±)ì„ ê³„ì‚°í•´ì•¼ í•˜ëŠ” ê²½ìš° ì í•©
    - `useEffect`: ì´ˆê¸° ë Œë”ë§ â†’ ì´í™íŠ¸ â†’ ë Œë”ë§
    - `useLayoutEffect`: ì´í™íŠ¸ â†’ ë Œë”ë§
  - ë¸Œë¼ìš°ì €ì˜ ë Œë”ë§ì„ ë§‰ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ ì €í•˜ ì´ìŠˆê°€ ìˆìœ¼ë‹ˆ, ê°€ëŠ¥í•˜ë©´ `useEffect`ë¥¼ ì‚¬ìš©í•˜ì
- **íŒŒë¼ë¯¸í„° (`useEffect`ì™€ ë™ì¼í•¨)**
- **ì‚¬ìš© ì˜ˆì‹œ**

  ```jsx
  // âœ…íˆ´íŒ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ì˜ˆì‹œ
  function Tooltip() {
    const ref = useRef(null);
    const [tooltipHeight, setTooltipHeight] = useState(0);

    // íˆ´íŒì´ ë Œë”ë§->ë¦¬ë Œë”ë§ ë˜ë©° ìœ„ì¹˜ê°€ ë°”ë€ŒëŠ” ê±¸ ì‚¬ìš©ìê°€ ë³´ë©´ ì•ˆ ë˜ë‹ˆê¹Œ,
    // í™”ë©´ì´ ë Œë”ë§ë˜ê¸° ì „ì— ì‘ì—…í•´ì•¼ í•¨
    useLayoutEffect(() => {
      const { height } = ref.current.getBoundingClientRect();
      setTooltipHeight(height);
    }, []);
  }
  ```

## 4. useContext

### useContext í›… ì‚¬ìš©ë²•

```jsx
const value = useContext(SomeContext);
```

- **ê°œë…**
  - ì»´í¬ë„ŒíŠ¸ì—ì„œ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì½ê³  êµ¬ë…í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” í›…
  - ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ì— ì „ì—­ì ì¸ ë°ì´í„°ë¥¼ ì œê³µí•  ìˆ˜ ìˆê²Œ í•¨
  - ë‹¤ìŒ ì´ìœ ë¡œ ê¼­ í•„ìš”í• ë•Œë§Œ ìµœì í™”í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ìŒ
    - [ì»¨í…ìŠ¤íŠ¸ API](https://ko.legacy.reactjs.org/docs/context.html#api)ë¥¼ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ì´ ì–´ë ¤ì›Œì§
    - **ì»¨í…ìŠ¤íŠ¸ë¥¼ êµ¬ë…í•œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” Providerì˜ `value`ê°€ ë°”ë€” ë•Œë§ˆë‹¤ ë¦¬ë Œë”ë§ë¨**
- **íŒŒë¼ë¯¸í„°**
  - `SomeContext`: `createContext`ë¡œ ìƒì„±í•œ ì»¨í…ìŠ¤íŠ¸
- **ë°˜í™˜ê°’**
  - `value`
    - ê°€ì¥ ê°€ê¹Œìš´ ìƒìœ„ `SomeContext.Provider`ì— ì „ë‹¬ëœ `value`
    - Provider ì»´í¬ë„ŒíŠ¸ë¡œ ê°ì‹¸ì§€ ì•Šì€ ê²½ìš°, `createContext`ì‹œ ì¸ìë¡œ ì „ë‹¬í•œ ì´ˆê¹ƒê°’
- **ì‚¬ìš© ì˜ˆì‹œ**

  ```jsx
  /* Theme ìƒíƒœ ì „ì—­ ê´€ë¦¬ ì˜ˆì‹œ */
  // App.js
  const ThemeContext = createContext('light');

  function App() {
    const [theme, setTheme] = useState('light');
    return (
      <ThemeContext.Provider value={{ theme, setTheme }}>
        <Page />
      </ThemeContext.Provider>
    );
  }

  // Providerë¡œ ê°ì‹¼ Page ì»´í¬ë„ŒíŠ¸ ì•ˆ ì–´ë”˜ê°€ì— ìˆëŠ” ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸
  // ThemeButton.js
  function ThemeButton() {
    const { theme, setTheme } = useContext(ThemeContext);
    return (
      <button
        style={{
          backgroundColor: theme === 'dark' ? 'black' : 'white',
          color: theme === 'dark' ? 'white' : 'black',
        }}
        onClick={() => {
          setTheme(theme === 'dark' ? 'light' : 'dark');
        }}
      >
        Toggle theme
      </button>
    );
  }
  ```

## 5. useReducer

### useReducer í›… ì‚¬ìš©ë²•

```jsx
const [state, dispatch] = useReducer(reducer, initialArg, init?)
```

- **ê°œë…**
  - Reducerë¥¼ í™œìš©í•´ ì£¼ë¡œ ë³µì¡í•œ êµ¬ì¡°ì˜ ìƒíƒœë¥¼ ìƒì„± ë° ê´€ë¦¬í•˜ê¸° ìœ„í•œ í›…
    - ì—…ë°ì´íŠ¸ ë¡œì§ì„ ë‹¨ê³„ì— ë”°ë¼ ë¶„ë¦¬ë˜ì–´ êµ¬í˜„í•˜ë¯€ë¡œ, ìƒíƒœ ì¶”ì ì— ìš©ì´í•¨
    - ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì•„ë‹Œ reducerì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬ ê°€ëŠ¥
  - **Reducer**: Actionì— ë”°ë¥¸ ë‹¤ìŒ ìƒíƒœë¥¼ ì •ì˜í•´ë†“ì€ **ë§¤ë‰´ì–¼ ë¶**
  - **Dispatch**: Actionì„ Reducerì— ì „ë‹¬í•´ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” **ì£¼ì²´**
  - **Action**: ìˆ˜í–‰í•  í–‰ìœ„
- **íŒŒë¼ë¯¸í„°**
  - `reducer`: `state`, `action`ì„ ë°›ê³ , `action`ì— ë”°ë¥¸ ë‹¤ìŒ `state`ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
  - `initialArg`: ìƒíƒœ ì´ˆê¹ƒê°’
  - `init?`: ìƒíƒœ ì´ˆê¸°í™” í•¨ìˆ˜
- **ë°˜í™˜ê°’**
  - `[state, dispatch]`
    - `state`: í˜„ì¬ ìƒíƒœ
    - `dispatch`: `action`ì„ ë°›ì•„ ìƒíƒœ ê°’ì„ ë³€ê²½í•˜ê³ , **ë¦¬ë Œë”ë§ì„ íŠ¸ë¦¬ê±°**í•˜ëŠ” í•¨ìˆ˜
- **ì£¼ì˜í•  ì **
  - `reducer`ëŠ” ë°˜ë“œì‹œ **ìˆœìˆ˜í•¨ìˆ˜**ì—¬ì•¼ í•¨
  - `reducer`ëŠ” ì¼ë°˜ì ì¸ ì»¨ë²¤ì…˜ì— ë”°ë¥´ë©´ `switch`ë¬¸ì„ í™œìš©í•´ `action`ì„ ë¶„ê¸°í•¨
  - `action`ì€ ëª¨ë“  ìë£Œí˜•ì´ ë  ìˆ˜ ìˆì§€ë§Œ, ì¼ë°˜ì ì¸ ì»¨ë²¤ì…˜ì€ ê°ì²´ì„
    - actionì„ ì •ì˜í•˜ëŠ” `type` í”„ë¡œí¼í‹° + ê¸°íƒ€ í”„ë¡œí¼í‹°ë¡œ ì´ë£¨ì–´ì§„ ê°ì²´
  - ê° `action`ì€ ë‹¨ì¼ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì„ ì„¤ëª…í•´ì•¼ í•¨
    - ì˜ˆë¥¼ ë“¤ì–´ formì— ìˆëŠ” Nê°œì˜ fieldë¥¼ resetí•´ì•¼ í•œë‹¤ê³  í•  ë•Œ, ê° fieldë¥¼ resetí•˜ëŠ” Nê°œì˜ actionì„ ë³´ë‚´ì§€ ë§ê³ , 'reset_all'ì´ë¼ëŠ” í•˜ë‚˜ì˜ actionì„ ë³´ë‚´ë¼ëŠ” ëœ»
- **ì‚¬ìš© ì˜ˆì‹œ**

  - ì¼ë°˜ì ì¸ ê°„ë‹¨í•œ ì˜ˆì œ

    ```jsx
    // âœ…ì¼ë°˜ì ì¸ ê°„ë‹¨í•œ ì˜ˆì œ
    function reducer(state, action) {
      switch (action.type) {
        case 'changed_name': {
          return {
            name: action.nextName,
          };
        }
        default: {
          throw Error('Unknown action: ' + action.type);
        }
      }
    }

    function NameField() {
      const [state, dispatch] = useReducer(reducer, { name: '' });

      const handleInputChange = (e) => {
        dispatch({
          type: 'changed_name',
          nextName: e.target.value,
        });
      };

      return <input value={state.name} onChange={handleInputChange} />;
    }
    ```

  - ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì™¸ë¶€ reducerë¡œ ë¶„ë¦¬í•˜ì—¬ ì½”ë“œ ë³µì¡ì„±ì„ ì¤„ì´ê³  ì ‘ê·¼ì„±ì„ ë†’ì¸ ì˜ˆì œ

    ```jsx
    // âœ…ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì™¸ë¶€ reducerë¡œ ë¶„ë¦¬í•œ ì˜ˆì œ
    // tasksReducer.js
    export default function tasksReducer(tasks, action) {
      switch (action.type) {
        case 'added': {
          return [
            ...tasks,
            {
              id: action.id,
              text: action.text,
              done: false,
            },
          ];
        }
        case 'changed': {
          return tasks.map((t) => {
            if (t.id === action.task.id) {
              return action.task;
            } else {
              return t;
            }
          });
        }
        case 'deleted': {
          return tasks.filter((t) => t.id !== action.id);
        }
        default: {
          throw Error('Unknown action: ' + action.type);
        }
      }
    }

    // TaskApp.js
    let nextId = 3;
    const initialTasks = [
      { id: 0, text: 'Visit Kafka Museum', done: true },
      { id: 1, text: 'Watch a puppet show', done: false },
      { id: 2, text: 'Lennon Wall pic', done: false },
    ];

    function TaskApp() {
      const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);

      function handleAddTask(text) {
        dispatch({
          type: 'added',
          id: nextId++,
          text: text,
        });
      }

      function handleChangeTask(task) {
        dispatch({
          type: 'changed',
          task: task,
        });
      }

      function handleDeleteTask(taskId) {
        dispatch({
          type: 'deleted',
          id: taskId,
        });
      }

      return (
        <>
          <AddTask onAddTask={handleAddTask} />
          <TaskList
            tasks={tasks}
            onChangeTask={handleChangeTask}
            onDeleteTask={handleDeleteTask}
          />
        </>
      );
    }
    ```

  - ì´ˆê°„ë‹¨ í† ê¸€ êµ¬í˜„ ì˜ˆì œ
    ```jsx
    // âœ…í† ê¸€ ì˜ˆì œ. useStateë¥¼ ì‚¬ìš©í•œ í† ê¸€ë³´ë‹¤ ê°„ëµí•˜ê³  í¸í•¨
    const [value, toggleValue] = React.useReducer((prev) => !prev, true);
    <button onClick={toggleValue}>Toggle</button>;
    ```

### useStateì™€ useReducer ë¹„êµ

|  | useState | useReducer |
| --- | --- | --- |
| ì½”ë“œ í¬ê¸° | ì ìŒ | ë¹„êµì  ë§ìŒ |
| ìƒíƒœ í¬ê¸° | ê°„ë‹¨í•œ ìƒíƒœ ê´€ë¦¬ì— ì í•© | ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ì— ì í•© |
| ë””ë²„ê¹… | ì™œ, ì–´ë””ì„œ stateê°€ ì˜ëª» ì„¤ì •ëëŠ”ì§€ ì°¾ê¸° ì–´ë ¤ì›€ | reducerì— ì§ì ‘ ì½˜ì†” ë¡œê·¸ë¥¼ ì‚½ì…í•´ ë²„ê·¸ ë°œìƒ ì§€ì ì„ íŒŒì•… ê°€ëŠ¥ but ë§ì€ ì½”ë“œë¥¼ ë‹¨ê³„ë³„ë¡œ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ì–´ë ¤ì›€ |
| í…ŒìŠ¤íŒ… |  | reducerê°€ ìˆœìˆ˜í•˜ë¯€ë¡œ ë…ë¦½ì ìœ¼ë¡œ ë¶„ë¦¬í•˜ê±°ë‚˜ í…ŒìŠ¤íŒ…í•˜ê¸° ì¢‹ìŒ |

## 6. useMemo/useCallback

### useMemo í›… ì‚¬ìš©ë²•

```jsx
const cachedValue = useMemo(calculateValue, dependencies);
```

- **ê°œë…**
  - ë¦¬ë Œë”ë§ ê°„ **ê³„ì‚° ê²°ê³¼ë¥¼ ìºì‹±í•˜ì—¬, ë¶ˆí•„ìš”í•œ ê³„ì‚°ì„ ê±´ë„ˆë›°ê²Œ í•´ì£¼ëŠ” í›…**
  - í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§(=í•¨ìˆ˜ í˜¸ì¶œ)ë˜ë©´ ë‚´ë¶€ ë³€ìˆ˜ê°€ ëª¨ë‘ ì´ˆê¸°í™”ë¨ â‡’ ì—°ì‚°ì„ ë§¤ë²ˆ í•´ì•¼ í•¨ â‡’ **ë¹„ì‹¼ ì—°ì‚°ì˜ ê²°ê³¼ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•´, ì—°ì‚° ëŒ€ì‹  ê°’ì„ êº¼ë‚´ ì¨ì„œ** ì„±ëŠ¥ ìµœì í™”
  - ëª¨ë“  ë©”ëª¨ì´ì œì´ì…˜ì´ íš¨ê³¼ì ì¸ ê±´ ì•„ë‹ˆë¯€ë¡œ, ê°€ë…ì„±ê³¼ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ê³ ë ¤í•´ ì±„íƒí•´ì•¼ í•¨
- **íŒŒë¼ë¯¸í„°**
  - `calculateValue`: ìºì‹±í•˜ë ¤ëŠ” ê°’ì„ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜
    - ì˜ì¡´ì„± ë°°ì—´ì´ ë³€ê²½ë  ë•Œ ì‹¤í–‰ë˜ë©°, ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ ì´ì „ ê³„ì‚° ê²°ê³¼ë¥¼ ë°˜í™˜í•¨
    - ì¸ìê°€ ì—†ìœ¼ë©° ìˆœìˆ˜í•¨ìˆ˜ì—¬ì•¼ í•¨
  - `dependencies`: `calculateValue`ì—ì„œ ì°¸ì¡°ë˜ëŠ” ê°’ë“¤ì„ ê°€ì§„ ë°°ì—´
- **ë°˜í™˜ê°’**
  - `cachedValue`: `calculateValue` ë°˜í™˜ê°’
- **useMemoê°€ ìœ ìš©í•œ ê²½ìš°**
  - `useMemo`ì— ì…ë ¥í•˜ëŠ” ê³„ì‚°ì´ ëˆˆì— ë„ê²Œ ëŠë¦¬ê³ , ì˜ì¡´ì„± ë°°ì—´ì´ ê±°ì˜ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ê²½ìš°
  - `cachedValue`ë¥¼ ì¼ë¶€ í›…ì˜ ì˜ì¡´ì„± ë°°ì—´ì— í¬í•¨í•˜ëŠ” ê²½ìš°
  - `memo`ë¡œ ê°ì‹¸ì§„ ì»´í¬ë„ŒíŠ¸ì— ê°ì²´ íƒ€ì…(Object, Array, Function â€¦)ì„ propsë¡œ ì „ë‹¬í•˜ëŠ” ê²½ìš°
- **ì‚¬ìš© ì˜ˆì‹œ**

  ```jsx
  function hardCalculate(number) {
    let result = number;
    for (let i = 1; i < 9999999999; i++) {
      result++;
    }
    return result;
  }

  function App() {
    const [number, setNumber] = useState(0);
    const [text, setText] = useState(''); // ë¦¬ë Œë”ë§ íŠ¸ë¦¬ê±°ìš©

    // const result = hardCalculate(number);
    const result = useMemo(() => hardCalculate(number), [number]);

    return (
      <>
        <input value={text} onChange={(e) => setText(e.target.value)} />
        <input value={number} onChange={(e) => setNumber(e.target.value)} />
        <p>ê³„ì‚° ê²°ê³¼: {result}</p>
      </>
    );
  }
  ```

  - `useMemo`ê°€ ì—†ìœ¼ë©´ `text`ë¥¼ ë³€ê²½í•  ë•Œ `App` ì „ì²´ê°€ ë¦¬ë Œë”ë§ë˜ì–´ `hardCalculate`ê°€ ì‹¤í–‰ë¨
  - `useMemo`ë¥¼ í†µí•´ `number`ê°€ ë³€ê²½ë  ë•Œë§Œ `calculate`ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•¨ â‡’ ì—°ì‚°ê³¼ ìƒê´€ ì—†ëŠ” `text`ê°€ ë³€ê²½ë˜ë©´ ìºì‹±í•œ ê°’ì„ ì‚¬ìš©

### React.memo API ì‚¬ìš©ë²•

```jsx
const MemoizedComponent = memo(component, arePropsEqual?)
```

- **ê°œë…**
  - **ì»´í¬ë„ŒíŠ¸ ìì²´ë¥¼ ë©”ëª¨ì´ì œì´ì…˜í•˜ì—¬, ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ ê±´ë„ˆë›°ê²Œ í•´ì£¼ëŠ” API**
  - ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§(=í˜¸ì¶œ)ë˜ë©´ ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ì¬ê·€ì ìœ¼ë¡œ ë Œë”ë§(=í˜¸ì¶œ)ë¨ â‡’ **ë¦¬ë Œë”ë§í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë©”ëª¨ì´ì œì´ì…˜**í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”
  - ë©”ëª¨í•œ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ëŠ” propsê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´, í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§í•˜ì§€ ì•ŠìŒ
- **íŒŒë¼ë¯¸í„°**
  - `component`: ì €ì¥í•˜ë ¤ëŠ” ì»´í¬ë„ŒíŠ¸
  - `arePropsEqual?`: ì´ì „ propsì™€ ìƒˆë¡œìš´ propsë¥¼ ë°›ì•„ ë¹„êµí•œ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
- **ë°˜í™˜ê°’**
  - `memoizedComponent`: propsê°€ ì´ì „ê³¼ ë™ì¼í•˜ë©´ ìƒˆë¡­ê²Œ ë Œë”ë§ë˜ì§€ ì•ŠëŠ” `component`
- **ì£¼ì˜ì‚¬í•­**
  - ì „ë‹¬í•˜ë ¤ëŠ” propsê°€ ì›ì‹œ íƒ€ì…ì´ ì•„ë‹ˆë©´, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ í˜¸ì¶œë  ë•Œ ë³€ìˆ˜ê°€ ì´ˆê¸°í™”ë˜ë©´ì„œ ì°¸ì¡°ê°’ì´ ë°”ë€œ â‡’ ì´ ê²½ìš° `useMemo`, `useCallback` ë“±ìœ¼ë¡œ í•´ë‹¹ ê°’ì„ ìºì‹±í•  ìˆ˜ ìˆìŒ
- **ì‚¬ìš© ì˜ˆì‹œ**

  ```jsx
  // App.js
  function App() {
    const [name, setName] = useState('Kim');
    const [age, setAge] = useState(0);
    return (
      <>
        <input value={name} onChange={(e) => setName(e.target.value)} />
        <button onClick={() => setCount(age + 1)}>ë‚˜ì´ ì¦ê°€</button>
        <Greeting name={name} />
      </>
    );
  }

  // Greeting.js
  function Greeting({ name }) {
    return <p>Hello, {name}!</p>;
  }

  export default memo(Greeting);
  ```

  - ë‚˜ì´ ì¦ê°€ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ `age`ê°€ ë³€ê²½ë˜ì–´ `App`ì´ ì¬í˜¸ì¶œ â‡’ ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
  - `memo(Greeting)`í•˜ì§€ ì•Šìœ¼ë©´, Appì´ ì¬í˜¸ì¶œë  ë•Œ `Greeting` ë˜í•œ ì¬í˜¸ì¶œ
  - `memo(Greeting)`í•˜ë©´, Appì´ ì¬í˜¸ì¶œë  ë•Œ `name` ê°’ì´ ì´ì „ê³¼ ë‹¤ë¥¼ ë•Œë§Œ `Greeting` ì¬í˜¸ì¶œ

### useCallback í›… ì‚¬ìš©ë²•

```jsx
const cachedFn = useCallback(fn, dependencies);
```

- **ê°œë…**
  - ë¦¬ë Œë”ë§ ê°„ **í•¨ìˆ˜ ìì²´ë¥¼ ìºì‹±í•˜ê²Œ í•´ì£¼ëŠ” í›…**
  - ì»´í¬ë„ŒíŠ¸ê°€ í˜¸ì¶œ ì‹œ ë³€ìˆ˜ê°€ ëª¨ë‘ ì´ˆê¸°í™”ë¨â‡’ í•¨ìˆ˜ì˜ ì°¸ì¡°ê°’ì´ ë°”ë€œ â‡’ í•¨ìˆ˜ì˜ ì •ì˜ê°€ ë°”ë€Œì§€ ì•Šì•˜ìŒì—ë„, ì˜ì¡´ì„± ë°°ì—´ì€ ë°”ë€Œì—ˆë‹¤ê³  íŒë‹¨ â‡’ `useCallback`ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ì €ì¥í•´ í•´ê²°
  ```
  ğŸš¨ í•¨ìˆ˜ ìƒì„±ì„ ê±´ë„ˆë›°ëŠ” ê²Œ ì•„ë‹˜ !! í•¨ìˆ˜ ìƒì„±ì€ ë Œë”ë§ë§ˆë‹¤ ì¼ì–´ë‚¨.
  ë‹¨ì§€ ì˜ì¡´ì„± ë³€ê²½ì´ ì—†ì„ ë•Œ ìºì‹±í•œ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒ ë¿.
  ```
- **íŒŒë¼ë¯¸í„°**
  - `fn`: ìºì‹±í•  í•¨ìˆ˜
  - `dependencies`: `fn`ì—ì„œ ì°¸ì¡°ë˜ëŠ” ê°’ë“¤ì„ ê°€ì§„ ë°°ì—´
- **ë°˜í™˜ê°’**
  - `cachedFn`: ìºì‹±í•œ `fn`
- **useCallbackì´ ìœ ìš©í•œ ê²½ìš°** (â‡’ í•¨ìˆ˜ê°€ ì´ì „ê³¼ ê°™ìŒì„ ë³´ì¥í•´ì•¼ í•˜ëŠ” ê²½ìš°)
  - `memo`ë¡œ ê°ì‹¸ì§„ ì»´í¬ë„ŒíŠ¸ì— í•¨ìˆ˜ë¥¼ propìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ê²½ìš°
  - í•¨ìˆ˜ê°€ ì–´ë–¤ í›…ì˜ ì˜ì¡´ì„± ë°°ì—´ì— í¬í•¨ë˜ëŠ” ê²½ìš°

## 7. useRef

### useRef í›… ì‚¬ìš©ë²•

```jsx
const ref = useRef(initialValue);
```

- **ê°œë…**
  - ë Œë”ë§ì— í•„ìš”í•˜ì§€ ì•Šì€ ê°’ì„ ì°¸ì¡°í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í›…
  - 1ï¸âƒ£ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•˜ì§€ ì•Šìœ¼ë©´ì„œ, ë¦¬ë Œë”ë§ ê°„ ì •ë³´ë¥¼ ì €ì¥í•´ì•¼ í•˜ëŠ” ê²½ìš°
  - 2ï¸âƒ£DOM ìš”ì†Œì— ì ‘ê·¼í•´ì•¼ í•˜ëŠ” ê²½ìš°
- **íŒŒë¼ë¯¸í„°**
  - `initialValue`: ë°˜í™˜í•˜ëŠ” ref ê°ì²´ì˜ `current` ê°’
- **ë°˜í™˜ê°’**
  - `ref ê°ì²´`: ë‹¨ì¼ í”„ë¡œí¼í‹° `current`ë¥¼ ê°–ëŠ” ê°ì²´
- **ê°’ ì €ì¥ ë°©ì‹ ë¹„êµ**

|  | state | ì¼ë°˜ ë³€ìˆ˜ | ref.current |
| --- | --- | --- | --- |
| ê°’ ë³€ê²½ ë°©ì‹ | `setState()` ì‚¬ìš© | ì§ì ‘ í• ë‹¹í•˜ì—¬ ë³€ê²½ | ì§ì ‘ í• ë‹¹í•˜ì—¬ ë³€ê²½ |
| ê°’ ë³€ê²½ ì‹œ ë Œë”ë§ íŠ¸ë¦¬ê±° | O | X | X |
| ë Œë”ë§ ê°„ ì •ë³´ ê¸°ì–µ | O | X (=ë¦¬ë Œë”ë§ ì‹œ íœ˜ë°œë¨) | O |

- **ì‚¬ìš© ì˜ˆì‹œ**

  - 1ï¸âƒ£ë Œë”ë§ê³¼ ê´€ë ¨ ì—†ëŠ” ê°’ ì €ì¥ ë³€ìˆ˜ë¡œì¨ì˜ í™œìš©

    ```jsx
    function Counter() {
      const refCount = useRef(0);

      const increment = () => {
        refCount.current += 1;
        console.log('í˜„ì¬ ê°’:', refCount.current);
      };

      return <button onClick={increment}>ê°’ ì¦ê°€</button>;
    }
    ```

  - 2ï¸âƒ£DOM ìš”ì†Œë¥¼ ì„ íƒí•´ ìŠ¤í¬ë¡¤ì„ ì¡°ì‘í•˜ëŠ” ì˜ˆì œ

    ```jsx
    function ScrollToTop() {
      const topRef = useRef(null);

      const scrollToTop = () => {
        if (topRef.current) {
          topRef.current.scrollIntoView({ behavior: 'smooth' });
        }
      };

      return (
        <>
          <div ref={topRef} style={{ height: '50vh' }}>
            í˜ì´ì§€ ìƒë‹¨
          </div>
          <div style={{ height: '150vh' }}></div>
          <button onClick={scrollToTop}>ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤</button>
        </>
      );
    }
    ```

  - ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ JSX ìš”ì†Œì— ì ‘ê·¼í•˜ëŠ” ì˜ˆì œ (`forwardRef`)

    ```jsx
    // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸
    function App({ videoSrc }) {
      const ref = useRef(null);

      return (
        <>
          <VideoPlayer ref={ref} src={videoSrc} type='video/mp4' width='250' />
          <button onClick={() => ref.current.play()}>play</button>
        </>
      );
    }

    // ìì‹ ì»´í¬ë„ŒíŠ¸
    function VideoPlayer({ src, type, width }, ref) {
      return (
        <video width={width} ref={ref}>
          <source src={src} type={type} />
        </video>
      );
    }

    export default forwardRef(VideoPlayer);
    ```
